<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.70.0" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>Labo 11: een GBA spel porten naar Qt :: Software Ontwerp in C(&#43;&#43;)</title>

    
    <link href="../../css/nucleus.css?1602585869" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1602585869" rel="stylesheet">
    <link href="../../css/hybrid.css?1602585869" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1602585869" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1602585869" rel="stylesheet">
    <link href="../../css/auto-complete.css?1602585869" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1602585869" rel="stylesheet">
    <link href="../../css/theme.css?1602585869" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1602585869" rel="stylesheet">
    
    <link href="../../css/theme-kul.css?1602585869" rel="stylesheet">
    
    

    <script src="../../js/jquery-3.3.1.min.js?1602585869"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
      <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

<script>
window.MathJax = {
  chtml: {
    scale: 2,                      
    minScale: .5,                  
    matchFontHeight: true,         
    mtextInheritFont: false,       
    merrorInheritFont: true,       
    mathmlSpacing: false,          
    skipAttributes: {},            
    exFactor: .5,                  
    displayAlign: 'center',        
    displayIndent: '0'             
  }
};
</script>

<script src=../../js/osc.js></script>
  </head>
  <body class="" data-url="/gba-in-cpp/labo-11/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
	<img src="../../img/style/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
	<img src="../../img/style/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1602585869"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1602585869"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/cpp-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1602585869"></script>

    
  </div>

    <div class="highlightable">
    <h3><a href="../../">Inhoudsopgave</a></h3>
    <ul class="topics">
        
          
          




 
  
    
    <li data-nav-id="/hoorcolleges/" title="Hoorcolleges" class="dd-item 
        
        
        
        ">
      <a href="../../hoorcolleges/">
          Hoorcolleges
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-1/" title="1. Introductie in C/C&#43;&#43;: context, ecosysteem" class="dd-item ">
        <a href="../../hoorcolleges/slides-1/">
        1. Introductie in C/C&#43;&#43;: context, ecosysteem
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-2/" title="2. Pointers in C, dynamisch geheugen in C&#43;&#43;" class="dd-item ">
        <a href="../../hoorcolleges/slides-2/">
        2. Pointers in C, dynamisch geheugen in C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-3/" title="3. Introductie in Object-Georiënteerd denken in C&#43;&#43;" class="dd-item ">
        <a href="../../hoorcolleges/slides-3/">
        3. Introductie in Object-Georiënteerd denken in C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-4/" title="4. Een introductie in GUI ontwerp met Qt, Samenvatting, examen info" class="dd-item ">
        <a href="../../hoorcolleges/slides-4/">
        4. Een introductie in GUI ontwerp met Qt, Samenvatting, examen info
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/c/" title="1. Introductie in C" class="dd-item 
        
        
        
        ">
      <a href="../../c/">
          1. Introductie in C
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/c/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../c/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/labo-1/" title="Labo 1: Introductie in C" class="dd-item ">
        <a href="../../c/labo-1/">
        Labo 1: Introductie in C
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/labo-2/" title="Labo 2: Pointers in C en C&#43;&#43;" class="dd-item ">
        <a href="../../c/labo-2/">
        Labo 2: Pointers in C en C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/stack-vs-heap/" title="Labo 2b: De stack VS de heap" class="dd-item ">
        <a href="../../c/stack-vs-heap/">
        Labo 2b: De stack VS de heap
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/gba-in-c/" title="2. GBA programming in C" class="dd-item 
        
        
        
        ">
      <a href="../../gba-in-c/">
          2. GBA programming in C
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/gba-in-c/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../gba-in-c/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-c/labo-3/" title="Labo 3: Introductie in GBA Programming" class="dd-item ">
        <a href="../../gba-in-c/labo-3/">
        Labo 3: Introductie in GBA Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-c/labo-4/" title="Labo 4: GBA Tilesets, een simpel spel" class="dd-item ">
        <a href="../../gba-in-c/labo-4/">
        Labo 4: GBA Tilesets, een simpel spel
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/cpp/" title="3. Introductie in C&#43;&#43;" class="dd-item 
        
        
        
        ">
      <a href="../../cpp/">
          3. Introductie in C&#43;&#43;
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/cpp/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../cpp/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/cpp/labo-5/" title="Labo 5: Weg met C, Hallo C&#43;&#43;" class="dd-item ">
        <a href="../../cpp/labo-5/">
        Labo 5: Weg met C, Hallo C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/cpp/labo-6/" title="Labo 6: C&#43;&#43; Class Inheritance, operators en templates" class="dd-item ">
        <a href="../../cpp/labo-6/">
        Labo 6: C&#43;&#43; Class Inheritance, operators en templates
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/cpp/labo-7/" title="Labo 7: Software ontwerpen" class="dd-item ">
        <a href="../../cpp/labo-7/">
        Labo 7: Software ontwerpen
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/gba-in-cpp/" title="4. GBA Programming in C&#43;&#43;" class="dd-item 
        parent
        
        
        ">
      <a href="../../gba-in-cpp/">
          4. GBA Programming in C&#43;&#43;
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../gba-in-cpp/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-8/" title="Labo 8: GBA Programming in C&#43;&#43;: een abstractielaag" class="dd-item ">
        <a href="../../gba-in-cpp/labo-8/">
        Labo 8: GBA Programming in C&#43;&#43;: een abstractielaag
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-9/" title="Labo 9: GBA Programming in C&#43;&#43;: scrolling backgrounds" class="dd-item ">
        <a href="../../gba-in-cpp/labo-9/">
        Labo 9: GBA Programming in C&#43;&#43;: scrolling backgrounds
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-10/" title="Labo 10: Een introductie in GUI ontwerp met C&#43;&#43; in Qt" class="dd-item ">
        <a href="../../gba-in-cpp/labo-10/">
        Labo 10: Een introductie in GUI ontwerp met C&#43;&#43; in Qt
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-11/" title="Labo 11: een GBA spel porten naar Qt" class="dd-item active">
        <a href="../../gba-in-cpp/labo-11/">
        Labo 11: een GBA spel porten naar Qt
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/extra/" title="5. Extras" class="dd-item 
        
        
        
        ">
      <a href="../../extra/">
          5. Extras
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/extra/project/" title="Project opdracht" class="dd-item ">
        <a href="../../extra/project/">
        Project opdracht
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/cheatsheet/" title="C Cheat Sheet" class="dd-item ">
        <a href="../../extra/cheatsheet/">
        C Cheat Sheet
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/buildsystems/" title="Een introductie in C(&#43;&#43;) Build Systemen" class="dd-item ">
        <a href="../../extra/buildsystems/">
        Een introductie in C(&#43;&#43;) Build Systemen
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/faq/" title="FAQ" class="dd-item ">
        <a href="../../extra/faq/">
        FAQ
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/installaties/" title="Installatieinstructies" class="dd-item ">
        <a href="../../extra/installaties/">
        Installatieinstructies
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/poll/" title="Poll: Ben ik klaar voor mijn examen?" class="dd-item ">
        <a href="../../extra/poll/">
        Poll: Ben ik klaar voor mijn examen?
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.uhasselt.be/studiegids"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://toledo.kuleuven.be/portal/"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Software ontwerp in C/C++</a> > <a href='../../gba-in-cpp/'>4. GBA Programming in C++</a> > Labo 11: een GBA spel porten naar Qt
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#eigen-widgets-implementeren">Eigen widgets implementeren</a></li>
<li><a href="#gebruik-maken-van-een-abstractielaag">Gebruik maken van een abstractielaag</a></li>
<li><a href="#werken-met-timers-voor-updates">Werken met timers voor updates</a></li>
<li><a href="#a-name-oef-a-labo-oefeningen"><a name="oef"></a>Labo oefeningen</a></li>
<li><a href="#denkvragen">Denkvragen</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Labo 11: een GBA spel porten naar Qt
            </h1>
          

        




<h2 id="eigen-widgets-implementeren">Eigen widgets implementeren</h2>

<p>De objectenboom uit <a href="../../gba-in-cpp/labo-10">labo 10</a> leert ons dat heel wat Qt objecten afleiden van <code>QWidget</code>. Dat is de ideale startplaats om zelf een widget te implementeren. Veel Qt objecten voorzien een <code>override</code> om het tekenen zelf af te kunnen handelen, vergelijkbaar met de while loop in een typisch gameboy spel.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">paintEvent</span>(QPaintEvent <span style="color:#f92672">*</span>event) override;</code></pre></div>
<p>In het <a href="http://doc.qt.io/qt-5/qtwidgets-widgets-tetrix-example.html">Textrix Qt Voorbeeld</a> wordt er gebruikt gemaakt van custom <code>QFrame</code> en <code>QWidget</code> implementaties die eigen objecten bijhouden die de tetris blokken voorstellen. Het tekenen van die blokken wordt aan de eigen code overgelaten. De <code>QPainter</code> klasse handelt het low-level tekenen af.</p>

<p>Dit voorbeeld, uit het voorbeeld genomen, tekent een tetris &ldquo;shape&rdquo; op het spelbord voor een gegeven painter instantie:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">void</span> TetrixBoard<span style="color:#f92672">::</span>drawSquare(QPainter <span style="color:#f92672">&amp;</span>painter, <span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y, TetrixShape shape)
{
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> QRgb colorTable[<span style="color:#ae81ff">8</span>] <span style="color:#f92672">=</span> {
        <span style="color:#ae81ff">0x000000</span>, <span style="color:#ae81ff">0xCC6666</span>, <span style="color:#ae81ff">0x66CC66</span>, <span style="color:#ae81ff">0x6666CC</span>,
        <span style="color:#ae81ff">0xCCCC66</span>, <span style="color:#ae81ff">0xCC66CC</span>, <span style="color:#ae81ff">0x66CCCC</span>, <span style="color:#ae81ff">0xDAAA00</span>
    };

    QColor color <span style="color:#f92672">=</span> colorTable[<span style="color:#66d9ef">int</span>(shape)];
    painter.fillRect(x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, squareWidth() <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>, squareHeight() <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>,
                     color);

    painter.setPen(color.light());
    painter.drawLine(x, y <span style="color:#f92672">+</span> squareHeight() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, x, y);
    painter.drawLine(x, y, x <span style="color:#f92672">+</span> squareWidth() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, y);

    painter.setPen(color.dark());
    painter.drawLine(x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">+</span> squareHeight() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>,
                     x <span style="color:#f92672">+</span> squareWidth() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">+</span> squareHeight() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);
    painter.drawLine(x <span style="color:#f92672">+</span> squareWidth() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">+</span> squareHeight() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>,
                     x <span style="color:#f92672">+</span> squareWidth() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
}</code></pre></div>
<p>Dit is redelijk <em>low-level</em>: <code>drawLine</code> , <code>setPen</code> en <code>fillRect</code> verwachten coördinaten als input. In Qt is het ook mogelijk om met <a href="http://doc.qt.io/qt-5/qtopengl-index.html">OpenGL</a> te werken maar dat valt buiten deze cursus.</p>

<h2 id="gebruik-maken-van-een-abstractielaag">Gebruik maken van een abstractielaag</h2>

<p>Herinner je uit <a href="../../cpp/labo-7">labo 7</a> en <a href="../../gba-in-cpp/labo-8">labo 8</a> het gebruik van een abstractielaag om de Gameboy Advance specifieke implementatie te verbergen in een tweede schil. Dit heeft als doel om makkelijk te kunnen switchen van <em>front-end</em>: als wij beslissen om onze GUI logica in Qt te schrijven, kunnen we de meeste logica, onze domein objecten, zonder meer overnemen! Dit bespaart ons véél moeite en duplicatie.</p>

<p>Een schematische voorstelling van de context met als voorbeeld het Arkanoid spel uit <a href="../../gba-in-c/labo-4">labo 4</a>:</p>

<script defer src="../../mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph LR;
    subgraph Arkanoid model
        A[<u>Paddle</u><br/>posx, posy]
        B[<u>Ball</u><br/>posx, posy]
        C[<u>BreakableBlocks</u><br/>posx, posy]
    end
    subgraph Qt Frontend
        F[QtArkanoidGame]
        A --> F
        B --> F
        C --> F
    end
    subgraph GBA Frontend
        D[GBAArkanoidGame]
        A --> D
        B --> D
        C --> D
    end

</div>

<p>Als alles perfect gescheiden is kan je de klassen aan de linkerkant van het schema volledig herbruiken. Dit betekent dat we géén specifieke GBA of Qt <code>#include</code> gebruiken en alle logica puur op de objecten zelf doen! Een potentiële <code>collidesWith()</code> zal dus op <code>posx</code> en <code>posy</code> checken en <strong>niet in OAM</strong> gaan kijken want dat bestaat niet in Qt. Omgekeerd zal het ook niet de QWidget of QFrame positie gebruiken want dat bestaat niet op de GBA.</p>

<p>Dit concept van stricte scheiding noemen we &ldquo;<strong>separation of concerns</strong>&rdquo; en is een veel gebruikt <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Design Pattern</a>. In de industrie wordt logica vaak gesplitst om een HTML frontend of een Android of iOS frontend makkelijk te kunnen opbouwen. Op die manier heb je 3 applicaties waarvan de belangrijkste basis, het domein, hetzelfde blijft.</p>

<p>Merk op dat dit eenvoudiger klinkt dan het in werkelijkheid er aan toe gaat: de <a href="https://github.com/wgroeneveld/gba-sprite-engine">gba-sprite-engine</a> die jullie gaan gebruiken voor het project voorziet wel degelijk een scheiding van low-level en high-level GBA implementatie, maar géén stricte scheiding: in scenes gebruik je sprites (zie <a href="https://github.com/wgroeneveld/gba-sprite-engine/blob/master/demos/demo1-basicfeatures/src/flying_stuff_scene.h">demo voorbeeld code</a>, en die sprites hebben een OAM buffer. Die zijn dus ongeschikt om in Qt te kunnen werken. Waarom is dit hier niet gedaan? Omdat het natuurlijk nooit voorkomt dat iemand die een GBA spel ontwerpt dit wil porten naar Qt. Wanneer is dit wel van belang? Als iemand een Nintendo Switch spel maakt en het ook op Steam of in de Playstation Store wil publiceren.</p>

<h2 id="werken-met-timers-voor-updates">Werken met timers voor updates</h2>

<p>In ons GBA spel hebben we één centrale <code>while(1) {}</code> loop waar constant alles opnieuw getekend wordt. In Qt wordt de paint methode automatisch aangeroepen, maar daarvoor moeten natuurlijk wel nog variabelen van waarde veranderen. In het Tetrix voorbeeld wordt hiervoor een <code>QBasicTimer</code> instance gebruikt:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">QBasicTimer timer;
timer.start(timeoutTime(), this);</code></pre></div>
<p>Om <code>this</code> te kunnen meegeven moet je een <code>void timerEvent(QTimerEvent *event)</code> implementatie voorzien waarin je je logica schrijft om bijvoorbeeld zwaartekracht te imiteren. Elk <code>QObject</code> heeft zo&rsquo;n implementatie: het is dus zaak om je niet te vergissen en enkel je eigen timer specifieke dingen af te handelen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">void</span> TetrixBoard<span style="color:#f92672">::</span>timerEvent(QTimerEvent <span style="color:#f92672">*</span>event) {
    <span style="color:#66d9ef">if</span> (event<span style="color:#f92672">-&gt;</span>timerId() <span style="color:#f92672">==</span> timer.timerId()) {
        <span style="color:#75715e">// do stuff, evt timer restarten
</span><span style="color:#75715e"></span>    } <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e">// parent timing
</span><span style="color:#75715e"></span>        QFrame<span style="color:#f92672">::</span>timerEvent(event);
    }
}</code></pre></div>
<h2 id="a-name-oef-a-labo-oefeningen"><a name="oef"></a>Labo oefeningen</h2>

<ol>
<li>Teken in een eigen <code>QWidget</code> implementatie een eenvoudig mannetje met hulp van wat simpele rechthoeken. Laat dat mannetje naar links en rechts bewegen door keyboard events op te vangen. Herinner je vanuit <a href="../../gba-in-cpp/labo-10">labo 10</a> dat dit met slots en signals kan. Implementeer hiervoor <code>void keyPressEvent(QKeyEvent *event);</code> en luister naar <code>event-&gt;key()</code>.</li>
<li>Download <a href="../../teaching/cpp/gba-arkanoid.zip">gba-arkanoid</a>, een C++ implementatie van de oefening uit <a href="../../gba-in-c/labo-4#oef">labo 4</a>. Dit CMake/CLion project is opgesplitst in 2 submappen: <em>domain</em> en <em>gba</em>. Het domein bevat methodes als <code>collidesWith</code> en <code>updatePosition</code>. De OAM GBA impelemntatie leeft in de gba submap. <br/>Port dit werkend minimalistisch spel naar Qt door de domein submap volledig <em>intact</em> te laten! De makkelijkste start is een nieuw project via Qt Creator waarbij je de domein code kopiëert.</li>
</ol>

<h2 id="denkvragen">Denkvragen</h2>

<ol>
<li>Beargumenteer waarom het principe van &ldquo;separation of concerns&rdquo; belangrijk kan zijn. Geef twee concrete voorbeelden waarom dit het geval is.</li>
<li>Wanneer beslis je om code te kopiëren, en wanneer beslis je om code te herbruiken? Beschrijf twee situaties waarin je het ene of het andere zou handhaven.</li>
</ol>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../gba-in-cpp/labo-10/" title="Labo 10: Een introductie in GUI ontwerp met C&#43;&#43; in Qt"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../extra/" title="5. Extras" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1602585869"></script>
    <script src="../../js/perfect-scrollbar.min.js?1602585869"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1602585869"></script>
    <script src="../../js/jquery.sticky.js?1602585869"></script>
    <script src="../../js/featherlight.min.js?1602585869"></script>
    <script src="../../js/highlight.pack.js?1602585869"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js?1602585869"></script>
    <script src="../../js/learn.js?1602585869"></script>
    <script src="../../js/hugo-learn.js?1602585869"></script>

    <link href="../../mermaid/mermaid.css?1602585869" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js?1602585869"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

