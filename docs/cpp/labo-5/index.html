<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.70.0" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>Labo 5: Weg met C, Hallo C&#43;&#43; :: Software Ontwerp in C(&#43;&#43;)</title>

    
    <link href="../../css/nucleus.css?1602585869" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1602585869" rel="stylesheet">
    <link href="../../css/hybrid.css?1602585869" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1602585869" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1602585869" rel="stylesheet">
    <link href="../../css/auto-complete.css?1602585869" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1602585869" rel="stylesheet">
    <link href="../../css/theme.css?1602585869" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1602585869" rel="stylesheet">
    
    <link href="../../css/theme-kul.css?1602585869" rel="stylesheet">
    
    

    <script src="../../js/jquery-3.3.1.min.js?1602585869"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
      <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

<script>
window.MathJax = {
  chtml: {
    scale: 2,                      
    minScale: .5,                  
    matchFontHeight: true,         
    mtextInheritFont: false,       
    merrorInheritFont: true,       
    mathmlSpacing: false,          
    skipAttributes: {},            
    exFactor: .5,                  
    displayAlign: 'center',        
    displayIndent: '0'             
  }
};
</script>

<script src=../../js/osc.js></script>
  </head>
  <body class="" data-url="/cpp/labo-5/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
	<img src="../../img/style/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
	<img src="../../img/style/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1602585869"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1602585869"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/cpp-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1602585869"></script>

    
  </div>

    <div class="highlightable">
    <h3><a href="../../">Inhoudsopgave</a></h3>
    <ul class="topics">
        
          
          




 
  
    
    <li data-nav-id="/hoorcolleges/" title="Hoorcolleges" class="dd-item 
        
        
        
        ">
      <a href="../../hoorcolleges/">
          Hoorcolleges
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-1/" title="1. Introductie in C/C&#43;&#43;: context, ecosysteem" class="dd-item ">
        <a href="../../hoorcolleges/slides-1/">
        1. Introductie in C/C&#43;&#43;: context, ecosysteem
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-2/" title="2. Pointers in C, dynamisch geheugen in C&#43;&#43;" class="dd-item ">
        <a href="../../hoorcolleges/slides-2/">
        2. Pointers in C, dynamisch geheugen in C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-3/" title="3. Introductie in Object-Georiënteerd denken in C&#43;&#43;" class="dd-item ">
        <a href="../../hoorcolleges/slides-3/">
        3. Introductie in Object-Georiënteerd denken in C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-4/" title="4. Een introductie in GUI ontwerp met Qt, Samenvatting, examen info" class="dd-item ">
        <a href="../../hoorcolleges/slides-4/">
        4. Een introductie in GUI ontwerp met Qt, Samenvatting, examen info
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/c/" title="1. Introductie in C" class="dd-item 
        
        
        
        ">
      <a href="../../c/">
          1. Introductie in C
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/c/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../c/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/labo-1/" title="Labo 1: Introductie in C" class="dd-item ">
        <a href="../../c/labo-1/">
        Labo 1: Introductie in C
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/labo-2/" title="Labo 2: Pointers in C en C&#43;&#43;" class="dd-item ">
        <a href="../../c/labo-2/">
        Labo 2: Pointers in C en C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/stack-vs-heap/" title="Labo 2b: De stack VS de heap" class="dd-item ">
        <a href="../../c/stack-vs-heap/">
        Labo 2b: De stack VS de heap
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/gba-in-c/" title="2. GBA programming in C" class="dd-item 
        
        
        
        ">
      <a href="../../gba-in-c/">
          2. GBA programming in C
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/gba-in-c/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../gba-in-c/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-c/labo-3/" title="Labo 3: Introductie in GBA Programming" class="dd-item ">
        <a href="../../gba-in-c/labo-3/">
        Labo 3: Introductie in GBA Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-c/labo-4/" title="Labo 4: GBA Tilesets, een simpel spel" class="dd-item ">
        <a href="../../gba-in-c/labo-4/">
        Labo 4: GBA Tilesets, een simpel spel
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/cpp/" title="3. Introductie in C&#43;&#43;" class="dd-item 
        parent
        
        
        ">
      <a href="../../cpp/">
          3. Introductie in C&#43;&#43;
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/cpp/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../cpp/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/cpp/labo-5/" title="Labo 5: Weg met C, Hallo C&#43;&#43;" class="dd-item active">
        <a href="../../cpp/labo-5/">
        Labo 5: Weg met C, Hallo C&#43;&#43;
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/cpp/labo-6/" title="Labo 6: C&#43;&#43; Class Inheritance, operators en templates" class="dd-item ">
        <a href="../../cpp/labo-6/">
        Labo 6: C&#43;&#43; Class Inheritance, operators en templates
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/cpp/labo-7/" title="Labo 7: Software ontwerpen" class="dd-item ">
        <a href="../../cpp/labo-7/">
        Labo 7: Software ontwerpen
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/gba-in-cpp/" title="4. GBA Programming in C&#43;&#43;" class="dd-item 
        
        
        
        ">
      <a href="../../gba-in-cpp/">
          4. GBA Programming in C&#43;&#43;
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/prep/" title="Voorbereiding Thuis" class="dd-item ">
        <a href="../../gba-in-cpp/prep/">
        Voorbereiding Thuis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-8/" title="Labo 8: GBA Programming in C&#43;&#43;: een abstractielaag" class="dd-item ">
        <a href="../../gba-in-cpp/labo-8/">
        Labo 8: GBA Programming in C&#43;&#43;: een abstractielaag
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-9/" title="Labo 9: GBA Programming in C&#43;&#43;: scrolling backgrounds" class="dd-item ">
        <a href="../../gba-in-cpp/labo-9/">
        Labo 9: GBA Programming in C&#43;&#43;: scrolling backgrounds
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-10/" title="Labo 10: Een introductie in GUI ontwerp met C&#43;&#43; in Qt" class="dd-item ">
        <a href="../../gba-in-cpp/labo-10/">
        Labo 10: Een introductie in GUI ontwerp met C&#43;&#43; in Qt
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gba-in-cpp/labo-11/" title="Labo 11: een GBA spel porten naar Qt" class="dd-item ">
        <a href="../../gba-in-cpp/labo-11/">
        Labo 11: een GBA spel porten naar Qt
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/extra/" title="5. Extras" class="dd-item 
        
        
        
        ">
      <a href="../../extra/">
          5. Extras
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/extra/project/" title="Project opdracht" class="dd-item ">
        <a href="../../extra/project/">
        Project opdracht
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/cheatsheet/" title="C Cheat Sheet" class="dd-item ">
        <a href="../../extra/cheatsheet/">
        C Cheat Sheet
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/buildsystems/" title="Een introductie in C(&#43;&#43;) Build Systemen" class="dd-item ">
        <a href="../../extra/buildsystems/">
        Een introductie in C(&#43;&#43;) Build Systemen
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/faq/" title="FAQ" class="dd-item ">
        <a href="../../extra/faq/">
        FAQ
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/installaties/" title="Installatieinstructies" class="dd-item ">
        <a href="../../extra/installaties/">
        Installatieinstructies
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/poll/" title="Poll: Ben ik klaar voor mijn examen?" class="dd-item ">
        <a href="../../extra/poll/">
        Poll: Ben ik klaar voor mijn examen?
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.uhasselt.be/studiegids"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://toledo.kuleuven.be/portal/"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Software ontwerp in C/C++</a> > <a href='../../cpp/'>3. Introductie in C++</a> > Labo 5: Weg met C, Hallo C++
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#de-in-c">De ++ in C++</a>
<ul>
<li><a href="#dingen-die-opvallen-wel-in-c-11-niet-in-c">Dingen die opvallen: wel in C++(11), niet in C</a></li>
</ul></li>
<li><a href="#classes-in-c">Classes in C++</a>
<ul>
<li><a href="#terug-naar-de-is-oud-opgave-van-labo-1-c-labo-1-maar-dan-in-c">Terug naar de is_oud opgave van <a href="../../c/labo-1">labo 1</a>, maar dan in C++</a></li>
<li><a href="#de-klasse-structuur">De Klasse structuur</a>
<ul>
<li><a href="#de-locatie-van-klassen">De locatie van klassen</a></li>
<li><a href="#circulaire-dependencies">Circulaire dependencies</a></li>
<li><a href="#inline-functies">Inline functies</a></li>
<li><a href="#in-class-initialization">In-class initialization</a></li>
<li><a href="#this-en-constante-functies">&ldquo;this&rdquo; en Constante functies</a></li>
</ul></li>
<li><a href="#auto-generated-constructoren">(auto-generated) Constructoren</a></li>
<li><a href="#methodes-in-klassen-en-reference-types">Methodes in Klassen en Reference types</a></li>
<li><a href="#wanneer-gebruik-ik-new-en-wanneer-niet">Wanneer gebruik ik &ldquo;new&rdquo; en wanneer niet?</a>
<ul>
<li><a href="#de-stack">De Stack</a></li>
<li><a href="#de-heap">De Heap</a></li>
<li><a href="#smart-pointers-in-c-11">Smart pointers in C++ 11</a></li>
</ul></li>
</ul></li>
<li><a href="#de-c-standard-library">De C++ Standard Library</a></li>
<li><a href="#initialisatie-van-objecten">Initialisatie van objecten</a>
<ul>
<li>
<ul>
<li><a href="#direct-initialization">Direct initialization</a></li>
<li><a href="#copy-initialization">Copy initialization</a></li>
</ul></li>
</ul></li>
<li><a href="#strings">Strings</a>
<ul>
<li><a href="#karakters-individueel-behandelen">Karakters individueel behandelen</a></li>
</ul></li>
<li><a href="#collecties-vector">Collecties: Vector</a></li>
<li><a href="#a-name-oef-a-labo-oefeningen"><a name="oef"></a>Labo oefeningen</a></li>
<li><a href="#denkvragen">Denkvragen</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Labo 5: Weg met C, Hallo C&#43;&#43;
            </h1>
          

        




<h2 id="de-in-c">De ++ in C++</h2>

<p>De introductie van C++ in 1985 geeft de ervaren C programmeur enkele extra mogelijkheden om zijn of haar code te structureren. C++ wordt nog steeds omschreven als een <em>&ldquo;general purpose&rdquo;</em> low-level taal op <a href="https://en.wikipedia.org/wiki/C%2B%2B">Wikipedia</a>:</p>

<blockquote>
<p>C++ is a general-purpose programming language. It has imperative, object-oriented and generic programming features, while also providing facilities for low-level memory manipulation.</p>
</blockquote>

<p>&ldquo;Object-oriented&rdquo; en &ldquo;generic&rdquo; zijn de sleutelwoorden hier. De C++ taal is geschreven als een extensie van C waarbij high-level features gebruikt kunnen worden om code te structureren. Kenners van Java voelen hun hier waarschijnlijk iets meer thuis (abstracts, classes, generics, grote STL bibliotheek, overloading) en dat verbaast niemand: de Java taal is sterk beïnvloed door C++.</p>

<h3 id="dingen-die-opvallen-wel-in-c-11-niet-in-c">Dingen die opvallen: wel in C++(11), niet in C</h3>

<p>Enkele belangrijke zaken die onmiddellijk opvallen:</p>

<ul>
<li>de aanwezigheid van <code>bool</code></li>
<li>los van <code>std::string</code> (bovenop <code>char</code>) en <code>std::wstring</code> (bovenop <code>wchar_t</code>), Extra Integral types:

<ul>
<li><code>wchar_t</code>, <code>char16_t</code>, <code>char32_t</code> (voor Unicode)</li>
</ul></li>
<li><a href="https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B">Zelf te definiëren operaties</a>:

<ul>
<li><a href="https://en.wikipedia.org/wiki/Scope_resolution_operator">scope resolutie</a> <code>::</code> en namespaces</li>
<li><code>&lt;&lt;</code>, <code>&gt;&gt;</code> streams</li>
</ul></li>
<li><code>class</code> en alles wat daar mee te maken heeft

<ul>
<li><code>new</code>, <code>delete</code> in plaats van <code>malloc()</code> en <code>free()</code></li>
</ul></li>
<li><code>nullptr</code> in plaats van <code>NULL</code>,</li>
<li><a href="https://en.wikipedia.org/wiki/Smart_pointer#unique_ptr">smart pointers</a> voor auto garbage collection</li>
<li><code>auto</code> als <em>type inference</em> zoals <code>var</code> in C#, <code>decltype</code> in plaats van <code>typeof</code></li>
<li>Exception handling</li>
</ul>

<h2 id="classes-in-c">Classes in C++</h2>

<h3 id="terug-naar-de-is-oud-opgave-van-labo-1-c-labo-1-maar-dan-in-c">Terug naar de is_oud opgave van <a href="../../c/labo-1">labo 1</a>, maar dan in C++</h3>

<p>Het is tijd om <code>malloc()</code> en <code>struct</code> achterwege te laten:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C++" data-lang="C++"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Persoon</span> {
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">int</span> leeftijd;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    Persoon(<span style="color:#66d9ef">int</span> leeftijd);
    <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isOud</span>() <span style="color:#66d9ef">const</span> {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;checking leeftijd van persoon &#34;</span> <span style="color:#f92672">&lt;&lt;</span> leeftijd <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> leeftijd <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">60</span>;
    }
    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getLeeftijd</span>() <span style="color:#66d9ef">const</span> { <span style="color:#66d9ef">return</span> leeftijd; }
};

Persoon<span style="color:#f92672">::</span>Persoon(<span style="color:#66d9ef">int</span> leeftijd) {
    <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>leeftijd <span style="color:#f92672">=</span> leeftijd;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">auto</span> jaak <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Persoon(<span style="color:#ae81ff">70</span>);
    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;is jaak oud? &#34;</span> <span style="color:#f92672">&lt;&lt;</span> jaak<span style="color:#f92672">-&gt;</span>isOud() <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
}
</code></pre></div>
<p>Dat ziet er al heel wat properder uit:</p>

<ul>
<li>We hebben een constructor gebruikt om een persoon aan te maken met leeftijd, zoals we kennen vanuit Java. De <code>this</code> pointer verwijst naar de huidige instance van de klasse.</li>
<li>We hebben methodes (inline) gedeclareerd in de klasse Persoon.</li>
<li>Jaak aanmaken hoeft geen type definitie als <code>Persoon *</code> met C++11&rsquo;s <code>auto</code> keyword. Leer auto goed kennen en gebruiken: <a href="http://www.acodersjourney.com/2016/02/c-11-auto/">overtuig jezelf</a>!</li>
</ul>

<p>Type inference is in combinatie met top-level <code>const</code> en references niet zo triviaal, zie p.68.</p>

<h3 id="de-klasse-structuur">De Klasse structuur</h3>

<p>Een klasse definiëren is niet meer dan een beschrijving van een structuur. Binnen de <code>class</code> accolades <code>{ }</code> leven niet alle declaraties van de functies in de klasse zelf! Dit is nog een erfenis van C. Elke klasse heeft zijn eigen scope en functies declareren doe je na de definitie met de scope operator <code>::</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">class Getal {
  private:
   <span style="color:#66d9ef">int</span> getal;
  public:
   <span style="color:#66d9ef">int</span> get() <span style="color:#66d9ef">const</span> { <span style="color:#66d9ef">return</span> getal; }
   <span style="color:#66d9ef">void</span> telOpMet(<span style="color:#66d9ef">int</span> ander);
   <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">vermenigvuldigMet</span>(<span style="color:#66d9ef">int</span> ander);
};

<span style="color:#66d9ef">void</span> Getal<span style="color:#f92672">::</span>telOpMet(<span style="color:#66d9ef">int</span> ander) {
  this<span style="color:#f92672">-&gt;</span>getal <span style="color:#f92672">+=</span> ander;
}
<span style="color:#66d9ef">void</span> Getal<span style="color:#f92672">::</span>vermenigvuldigMet(<span style="color:#66d9ef">int</span> ander) {
  this<span style="color:#f92672">-&gt;</span>getal <span style="color:#f92672">*=</span> ander;
}</code></pre></div>
<h4 id="de-locatie-van-klassen">De locatie van klassen</h4>

<p>Twee van de drie methodes staan buiten de klasse definitie. We maken hier typisch twee files voor aan:</p>

<ol>
<li>getal.h waar de klasse definitie in leeft</li>
<li>getal.cpp waar de methode declaraties in leven</li>
</ol>

<p>Verschillende andere source files kunnen de Getal klasse gebruiken met <code>#include &quot;getal.h&quot;</code>. De klasse kan maar 1x gedefiniëerd worden, en 2x de header includen in je programma geeft een compilatiefout:</p>

<pre>
Wouters-MacBook-Air:c-course-gba wgroenev$ g++ -std=c++11 dubbel.cpp getal.o
In file included from dubbel.cpp:4:
./getal.h:1:7: error: redefinition of 'Getal'
class Getal {
      ^
./getal.h:1:7: note: previous definition is here
class Getal {
      ^
1 error generated.
</pre>

<p>Dit lossen we op met een preprocessor constructie in de getal.h header file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">#ifndef _GETAL_H_
</span><span style="color:#75715e">#define _GETAL_H_
</span><span style="color:#75715e"></span>
class Getal { };

<span style="color:#75715e">#endif</span></code></pre></div>
<h4 id="circulaire-dependencies">Circulaire dependencies</h4>

<p>Zoals in veel andere programmeertalen, kan klasse 1 wel naar klasse 2 verwijzen, maar dan niet omgekeerd. Een mooi gesloten lus maken in schemavorm noemen we een <strong>circulaire dependency</strong>: object 1 is afhankelijk van object 2, die op zijn beurt terug afhankelijk is van object 1:</p>

<script defer src="../../mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph LR
  K1[class 1]
  K2[class 2]
  K1 --> K2
  K2 --> K1q

</div>

<p>Het is niet mogelijk om twee klassen naar elkaar te laten verwijzen door middel van een <code>#ìnclude</code> statement. De volgende foutboodschap schept hierin genoeg duidelijkheid:</p>

<pre>
In file included from ./inc2.h:2:
In file included from ./inc1.h:2:
In file included from ./inc2.h:2:
In file included from ./inc1.h:2:
In file included from ./inc2.h:2:
In file included from ./inc1.h:2:
[...]
./inc2.h:4:7: error: redefinition of 'Inc2'
class Inc2 {
      ^
./inc2.h:4:7: note: previous definition is here
class Inc2 {
      ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated.
</pre>

<h4 id="inline-functies">Inline functies</h4>

<p>Waarom is de eerste methode in de body gedeclareerd? Dit is een <code>inline</code> functie (<a href="https://isocpp.org/wiki/faq/Inline-Functions">zie doc</a>). Dit zijn typisch one-liners die vaak aangeroepen worden en door de compiler geoptimaliseerd <em>kunnen</em> worden: de aanroep instructie vervangen door de implementatie, zoals de preprocessor doet met <code>#define</code>.</p>

<p>Wanneer schrijven we een inline functie?</p>

<ol>
<li><strong>Duidelijkheid</strong>: Als de functie zeer klein is en die in de header file kan leven zodat gebruikers hiervan ondubbelzinnig kunnen zien wat dit doet.</li>
<li><strong>Optimalisatie</strong> kàn ook.</li>
</ol>

<h4 id="in-class-initialization">In-class initialization</h4>

<p>Sinds C++ 11 kan je ook default values meegeven aan data members in de definitie van de klasse zelf. Dit klinkt belachelijk omdat zoiets in Java vanaf het begin al kon. In de private sectie van de Getal klasse kunnen we dus <code>int getal = 5;</code> zetten. Als er geen constructor deze member initialiseert wordt getal op 5 gezet.</p>

<h4 id="this-en-constante-functies">&ldquo;this&rdquo; en Constante functies</h4>

<p>De magische <code>this</code> variabele wordt impliciet aangemaakt zodra je een methode van een instantie op een klasse uitvoert. This is het adres van de locatie van diezelfde instantie:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> new Getal();

g<span style="color:#f92672">-&gt;</span>telOpMet(<span style="color:#ae81ff">5</span>);
<span style="color:#f92672">//</span> compiler interpretatie: Getal<span style="color:#f92672">::</span>telOpMet(<span style="color:#f92672">&amp;</span>g, <span style="color:#ae81ff">5</span>);</code></pre></div>
<p>Het <code>const</code> keyword achter de get methode verandert de <code>this</code> pointer naar een constante pointer. Op die manier kan de body van de methode geen wijzigingen doorvoeren, enkel opvragen. (Zie p. 258)</p>

<h3 id="auto-generated-constructoren">(auto-generated) Constructoren</h3>

<p>Een klasse instantiëren roept de (default) constructor aan. Als er geen eigen gedefiniëerde constructor aanwezig is, genereert de compiler die voor u, net als in Java. Zodra je één constructor definiëert, zal C++ geen enkele zelf genereren.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">class Getal {
  private:
    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x;
  public:
   Getal(<span style="color:#66d9ef">int</span> x) <span style="color:#f92672">:</span> x(new <span style="color:#66d9ef">int</span>(x)) {}
};
<span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> new Getal(<span style="color:#ae81ff">5</span>);  <span style="color:#75715e">// ok: eigen constructor aangeroepen
</span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> new Getal();   <span style="color:#f92672">//</span> error: Too few arguments, expects <span style="color:#ae81ff">1</span></code></pre></div>
<p>De default constructor is makkelijk zelf te voorzien met <code>Getal() {}</code> maar met <code>Getal() = default;</code> zeggen we tegen de compiler dat hij expliciet wél eentje moet genereren.</p>

<p>Merk op dat we hier een <em>memory leak</em> introduceren door <code>*x</code> niet zelf op te kuisen! Als een klasse <em>resources</em> zoals pointers bevat is het de bedoeling dat deze zelf verantwoordelijk is voor de opkuis. Dit gebeurt in de destructor prefixed met <code>~</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">class Getal {
  private:
    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x;
  public:
   Getal() <span style="color:#f92672">=</span> <span style="color:#66d9ef">default</span>;
   <span style="color:#f92672">~</span>Getal() { delete x; }
   Getal(<span style="color:#66d9ef">int</span> x) <span style="color:#f92672">:</span> x(new <span style="color:#66d9ef">int</span>(x)) {}
};</code></pre></div>
<p>Java heeft geen destructors omdat objecten op de heap leven en door de Garbage Collector opgeruimd worden zonder invloed van de programmeur. Er is wel een <code>finalize</code> die je zelf kan aanroepen om resources op te kuisen. In C# wordt ook de <code>~Object(){}</code> notatie gebruikt, maar dat is ook een soort van finalizer en geen échte destructor.</p>

<p>Een derde soort constructor, de &ldquo;copy constructor&rdquo;, wordt ook door C++ voorzien en aangeroepen wanneer de expressie <code>getal1 = getal2</code> geëvalueerd wordt. De compiler maakt een nieuwe <code>Getal</code> instance aan en kopiëert alle velden over.</p>

<p>Dit is echter helemaal niet wat we willen als we <em>resources</em> als members hebben zoals <code>*x</code>: de pointer wordt gekopiëerd maar niet de inhoud. Beide getal instances verwijzen dan dezelfde <code>x</code> waarde:</p>

<p>Wat is de output van dit programma?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> new Getal(<span style="color:#ae81ff">5</span>);
    <span style="color:#66d9ef">auto</span> g2 <span style="color:#f92672">=</span> g;
    g2<span style="color:#f92672">-&gt;</span>x <span style="color:#f92672">=</span> new <span style="color:#66d9ef">int</span>(<span style="color:#ae81ff">10</span>);
    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">*</span>(g2<span style="color:#f92672">-&gt;</span>x) <span style="color:#f92672">&lt;&lt;</span> endl;   <span style="color:#75715e">// ?
</span><span style="color:#75715e"></span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">*</span>(g<span style="color:#f92672">-&gt;</span>x) <span style="color:#f92672">&lt;&lt;</span> endl;    <span style="color:#75715e">// ?
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>Oeps. Voorzie in dat geval je eigen copy constructor met <code>Getal(const Getal&amp; other) : x(new int(*(other.x))) {}</code>. Copy constructors kan je ook defaulten.</p>

<h3 id="methodes-in-klassen-en-reference-types">Methodes in Klassen en Reference types</h3>

<p>Herinner je uit <a href="../../c/labo-2">labo 2</a> reference type definities zoals <code>int &amp;getal</code>. Deze notatie ga je veel tegen komen in C++ methode argumenten. Objecten die meegegeven worden zijn bijna altijd reference types in plaats van pointers. Waarom legt de <a href="https://isocpp.org/wiki/faq/references#refs-vs-ptrs">C++ FAQ</a> uit:</p>

<blockquote>
<p>Use references when you can, and pointers when you have to.
References are usually preferred over pointers whenever you don’t need “reseating”. This usually means that references are most useful in a class’s public interface. References typically appear on the skin of an object, and pointers on the inside.</p>
</blockquote>

<p>Zo kunnen we in Getal methodes toevoegen die andere Getal instanties gebruiken:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">// getal.h
</span><span style="color:#75715e"></span>class Getal {
  <span style="color:#66d9ef">void</span> telOpMet(<span style="color:#66d9ef">const</span> Getal <span style="color:#f92672">&amp;</span>ander);
}
<span style="color:#75715e">// getal.cpp
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> Getal<span style="color:#f92672">::</span>telOpMet(<span style="color:#66d9ef">const</span> Getal <span style="color:#f92672">&amp;</span>ander) {
  this<span style="color:#f92672">-&gt;</span>getal <span style="color:#f92672">+=</span> ander.getal;
}
<span style="color:#75715e">// dubbel.cpp, in main
</span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> new Getal();
<span style="color:#66d9ef">auto</span> nieuwGetal <span style="color:#f92672">=</span> new Getal();
nieuwGetal<span style="color:#f92672">-&gt;</span>telOpMet(<span style="color:#f92672">*</span>g);</code></pre></div>
<p>We moeten g <em>dereferencen</em> om als reference mee te kunnen geven. <code>const</code> wordt hier gebruikt om zeker te zijn dat het binnenkomende getal niet gewijzigd kan worden. Alternatief kunnen we <code>new</code> twee keer weglaten: <code>auto g = Getal();</code> en dan <code>nieuwGetal.telOpMet(g);</code>.</p>

<h3 id="wanneer-gebruik-ik-new-en-wanneer-niet">Wanneer gebruik ik &ldquo;new&rdquo; en wanneer niet?</h3>

<p>Een pointer naar een object in het geheugen aanmaken (en geheugen reserveren) met <code>new</code> vereist dat je die <em>zelf opkuist</em> met <code>delete</code>! Als je dit niet doet blijft dat geheugen bezet en krijg je wat men noemt &ldquo;memory leaks&rdquo;: hoe langer men je programma gebruikt, hoe meer geheugen het (ongewenst) in beslag neemt.</p>

<p>Om dat te vermijden gebruik je best binnen functies nooit <code>new</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">telOpAutoClean</span>() {
  <span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> Getal(<span style="color:#ae81ff">3</span>);
  g.telOpMet(<span style="color:#ae81ff">5</span>);
  <span style="color:#75715e">// block eindigt: g wordt opgekuist
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">telOpManualClean</span>() {
  <span style="color:#66d9ef">auto</span> g <span style="color:#f92672">=</span> new Getal(<span style="color:#ae81ff">5</span>);
  g<span style="color:#f92672">-&gt;</span>telOpMet(<span style="color:#ae81ff">5</span>);
  <span style="color:#75715e">// block eindigt: g blijft bestaan!
</span><span style="color:#75715e"></span>  delete g;
}</code></pre></div>
<p><code>Getal(3)</code> zonder new ziet er vreemd uit als je talen als C# en Java gewoon bent, maar de constructor wordt evenzeer aangeroepen en een object wordt evenzeer voor je geïnstantieerd.</p>

<h4 id="de-stack">De Stack</h4>

<p>Lokale variabelen worden op de <strong>stack</strong> bewaard. De stack bevat een tijdelijke workspace aan geheugen wanneer functies aangeroepen worden, die automatisch opgeruimd worden als die functies klaar zijn met hun werk. De Stack is een LIFO lijst.</p>

<h4 id="de-heap">De Heap</h4>

<p>De heap is geheugen dat opzij gezet wordt voor dynamische allocatie. Zodra je een pointer aanmaakt komt dit op de heap terecht en ben je zelf verantwoordelijk voor het opruimen hiervan. In Java zijn instance variabelen en objecten deel van de heap, in C++ is dat wat complexer.</p>

<script defer src="../../mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph TD;
    subgraph De Stack
      D[Getal ptr_getal = new Getal]
      C[Getal getal = Getal]
      A[int main]
      B[void telOp]
      B --> A
      C --> B
      D --> B
    end
    subgraph De Heap
      E[Getal geheugen]
      D -.-> E
    end

</div>

<p>Het adres in <code>ptr_getal</code> leeft op de stack binnen de <code>telOp()</code> methode, maar het geheugen waar het naar verwijst leeft op de heap. Het adres verdwijnt als alles van telOp weggegooid wordt in de stack - maar het getal geheugen blijft bestaan totdat iemand met <code>delete</code> de opkuis doet.</p>

<p>De dotted pijl van ptr_getal naar getal in de heap verdwijnt en is nooit meer toegankelijk: dit noemt men &ldquo;<em>leaking</em>&rdquo;. Moderne C++ programma&rsquo;s maken zelden gebruik van &ldquo;raw pointers&rdquo; (<code>*</code>) en laten de compiler en het OS beslissen of zaken op de stack of de heap moeten komen.</p>

<h4 id="smart-pointers-in-c-11">Smart pointers in C++ 11</h4>

<p>In plaats van zelf geheugen te managen - we hebben immers wel wat beters te doen - laten we dat over aan de taal door &ldquo;smart pointers&rdquo; te gebruiken. Dit zijn STL wrappers (zie onder) die een object encapsuleren. Als een block stopt, kuist deze smart variabele je wrapped object zelf ook op:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">unique_ptr<span style="color:#f92672">&lt;</span>Getal<span style="color:#f92672">&gt;</span> g (new Getal());                <span style="color:#75715e">// zonder auto
</span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> nieuwGetal <span style="color:#f92672">=</span> unique_ptr<span style="color:#f92672">&lt;</span>Getal<span style="color:#f92672">&gt;</span>(new Getal()); <span style="color:#75715e">// met auto
</span><span style="color:#75715e"></span>nieuwGetal<span style="color:#f92672">-&gt;</span>telOpMet(<span style="color:#f92672">*</span>g);</code></pre></div>
<p>We komen later nog op de template <code>&lt;&gt;</code> notatie terug. Neem hier aan dat dit werkt als Generics in Java.</p>

<p>Zie p.470 of <a href="https://docs.microsoft.com/en-us/cpp/cpp/smart-pointers-modern-cpp">Smart pointers in modern C++</a>.</p>

<p>Vergeet niet dat smart pointers niet werken in combinatie met variabelen op de stack (dus altijd <code>new</code> gebruiken). Stel dat een klasse een referentie naar een <code>unique_ptr</code> heeft die automatisch de pointer zou moeten opkuisen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">class Holder {
  public:
   unique_ptr<span style="color:#f92672">&lt;</span>Iets<span style="color:#f92672">&gt;</span> autoDeleted;
   Holder() {
    Iets iets(<span style="color:#e6db74">&#34;1&#34;</span>);
    this<span style="color:#f92672">-&gt;</span>autoDeleted <span style="color:#f92672">=</span> unique_ptr<span style="color:#f92672">&lt;</span>Iets<span style="color:#f92672">&gt;</span>(<span style="color:#f92672">&amp;</span>iets);
   }
}</code></pre></div>
<p>De deconstrutor van de holder gaat automatisch de waarde die autoDeleted vasthoudt terug vrijgeven, maar de variabele <code>iets</code> bestaat al niet meer omdat die enkel op de stack binnen de constructor functie leeft. <code>&amp;iets</code> verwijst nu naar &ldquo;niks&rdquo; en dit crasht.</p>

<h2 id="de-c-standard-library">De C++ Standard Library</h2>

<p>Merk op dat in bovenstaande Persoon klasse <code>printf()</code> verdwenen is. In C++ gebruiken we streams: <code>cout</code> als <code>stdout</code> en <code>cin</code> als <code>stdin</code>. Deze leven in de <code>std</code> namespace zodra je <code>iostream</code> include. Laat de &ldquo;.h&rdquo; suffix achterwege bij het includen van systeembibliotheken van C++. Laat het maar aan de compiler over om de systeembestanden te zoeken tijdens het linken.</p>

<p>De Standard Template Library <a href="https://en.wikipedia.org/wiki/Standard_Template_Library">STL</a> is een bibliotheek die meegeleverd wordt bij de meeste moderne C++ compilers waar <code>iostream</code> in leeft. Deze implementeert de nieuwe standaarden, zoals C++11. Compilers vragen soms wel een flag om te kiezen met welke library er gelinkt wordt: <code>g++ -std=c++11</code>.</p>

<p>STL bevat een hoop dingen die je het leven makkelijker maakt: strings (gek genoeg nog steeds geen deel van de taal zelf), collecties, streams, IO, &hellip; Bekijk het als de .NET library voor de C# taal of de meegebakken <code>java.*</code> klassen en methodes voor Java. &ldquo;Part II: The C++ Library (p. 307)&rdquo; behandelt deze zaken in het handboek.</p>

<p>In plaats van constant <code>std::cout</code> te moeten typen kunnen we alles wat in die namespace zit ook &ldquo;importeren&rdquo; zoals een Java <code>import java.io.*</code> met <code>using namespace std;</code>. <code>cout</code> is een instantie van de klasse <code>ostream</code>.</p>

<h2 id="initialisatie-van-objecten">Initialisatie van objecten</h2>

<p>In C++ kan je op twee manieren aan objecten een waarde toekennen (Zie p.43). Het is belangrijk om de verschillende nuances te kunnen onderscheiden omdat met objecten verschillende constructoren gemoeid zijn.</p>

<h4 id="direct-initialization">Direct initialization</h4>

<p><code>int x(5)</code> of <code>Getal g(5)</code></p>

<p>Hiervoor is een <strong>constructor</strong> (met argument) nodig.</p>

<p>Waarom zou je <code>()</code> doen in plaats van <code>=</code>? Omdat impliciete conversie enkel via direct initialization gebeurt. Stel, ik wil een string in de constructor aanvaarden. Strings met quotes in C++ zijn nog steeds char arrays vanuit C. Dit gaat niet:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">// C++
</span><span style="color:#75715e"></span>class Groet {
public:
  Groet(std<span style="color:#f92672">::</span>string s) {}
  <span style="color:#66d9ef">void</span> zegIets() {};
};
Groet heykes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;sup&#34;</span>;  <span style="color:#75715e">// error: no conversion from const char[3] to Groet
</span><span style="color:#75715e"></span>Groet <span style="color:#a6e22e">heykes</span>(<span style="color:#e6db74">&#34;sup&#34;</span>)<span style="color:#f92672">:</span>   <span style="color:#75715e">// ok: impliciete conversie
</span><span style="color:#75715e"></span>Groet hekyes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;sup&#34;</span>s; <span style="color:#75715e">// ok: char[] zelf omgezet, zie strings sectie
</span><span style="color:#75715e"></span>Groet heykes;          <span style="color:#75715e">// ok: heykes is nieuw leeg Groet object op stack
</span><span style="color:#75715e"></span>heykes.zegIets();      <span style="color:#f92672">//</span> ok</code></pre></div>
<p>Vergeet niet dat het verschil tussen C++ en Java op gebied van initialisatie groot is! In Java zijn objecten na hun declaratie altijd <code>null</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#75715e">// Java
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Groet</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Groet</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{}</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">zegIets</span><span style="color:#f92672">()</span> <span style="color:#f92672">{}</span>
<span style="color:#f92672">}</span>
Groet <span style="color:#a6e22e">heykes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;sup&#34;</span><span style="color:#f92672">);</span>  <span style="color:#75715e">// error: impliciete conversie gaat nooit lukken
</span><span style="color:#75715e"></span>Groet heykes<span style="color:#f92672">;</span>         <span style="color:#75715e">// ok: heykes verwijst naar null
</span><span style="color:#75715e"></span>heykes<span style="color:#f92672">.</span><span style="color:#a6e22e">zegIets</span><span style="color:#f92672">();</span>     <span style="color:#75715e">// error: NullPointerException
</span><span style="color:#75715e"></span>heykes <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Groet<span style="color:#f92672">();</span> <span style="color:#75715e">// ok: object op heap aangemaakt
</span><span style="color:#75715e"></span>heykes<span style="color:#f92672">.</span><span style="color:#a6e22e">zegIets</span><span style="color:#f92672">();</span>     <span style="color:#f92672">//</span> ok</code></pre></div>
<h4 id="copy-initialization">Copy initialization</h4>

<p><code>int x = 5</code> of <code>Getal g = Getal(5)</code> of <code>int x = { 5 }</code></p>

<p>Hiervoor is een <strong>copy constructor</strong> nodig.</p>

<p>Merk op dat gebruik van accolades <code>{ }</code> eigenlijk copy initialisatie doorvoert, evenals single return statements als <code>return 3 + 4</code>. Dit kan je omzetten naar direct initialization met <code>int retval(3 + 4); return retval;</code>.</p>

<p>Constructors en copy constructors hoeven niet zelf aangemaakt te worden: C++ voorziet defaults. Een lege constructor maakt een leeg object aan. Een lege copy constructor voert eenm ember-wise (shallow) copy door. Als je die toch wil maken doe je dat zo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">class Punt {
  private:
   <span style="color:#66d9ef">int</span> x, y;
  public:
   Punt() <span style="color:#f92672">:</span> x(<span style="color:#ae81ff">1</span>), y(<span style="color:#ae81ff">1</span>) { }                              <span style="color:#75715e">// default
</span><span style="color:#75715e"></span>   Punt(<span style="color:#66d9ef">const</span> Punt<span style="color:#f92672">&amp;</span> other) <span style="color:#f92672">:</span> x(other.x), y(other.y) { } <span style="color:#75715e">// copy
</span><span style="color:#75715e"></span>}</code></pre></div>
<h2 id="strings">Strings</h2>

<p><code>std::string</code> in <code>#include &lt;string&gt;</code> is de vervanger van de rudimentaire <code>char*</code> in C++. Met strings kan je zoals in Java dingen doen als:</p>

<ul>
<li>Grootte opvragen met <code>.size()</code> of <code>.empty()</code></li>
<li>Concatenaties doorvoeren met de <code>+</code> operator</li>
<li>Karakters opvragen met <code>[]</code></li>
<li>Vergelijkingen uitvoeren met <code>&lt;(=)</code>, <code>&gt;(=)</code></li>
</ul>

<p>De grootte van een strings is niet een <code>int</code> maar een <code>std::size_type</code> &ldquo;companion type&rdquo; om STL op eender welke machine op dezelfde manier te kunnen gebruiken (p.88). Dat is een van de nadelen van C(++) doordat we voor een specifiek systeem compileren.</p>

<h3 id="karakters-individueel-behandelen">Karakters individueel behandelen</h3>

<p>Gebruik de C++ 11 <em>range for</em> notatie die we van C# en Java kennen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">auto</span> str <span style="color:#f92672">=</span> string(<span style="color:#e6db74">&#34;sup&#34;</span>);
<span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> c : str) {
  cout <span style="color:#f92672">&lt;&lt;</span> c;
}</code></pre></div>
<p>Als c een reference is kan je in de loop zelf de karakters ook wijzigen.</p>

<h2 id="collecties-vector">Collecties: Vector</h2>

<p>In plaats van met vaste array waardes te werken kunnen we ook lijsten gebruiken. STL voorziet er een aantal, waarvan <code>vector</code> de belangrijkste is - Java&rsquo;s <code>ArrayList</code> tegenhanger. Vanaf C++ 11 kan je die ook snel initialiseren met copy initialization:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">vector<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> tekst <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;roe&#34;</span>, <span style="color:#e6db74">&#34;koe&#34;</span>, <span style="color:#e6db74">&#34;zei&#34;</span>, <span style="color:#e6db74">&#34;de&#34;</span>, <span style="color:#e6db74">&#34;duif&#34;</span> }; <span style="color:#75715e">// lijst van 5 strings
</span><span style="color:#75715e"></span>vector<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> leeg;        <span style="color:#75715e">// lege lijst van strings, grootte 9
</span><span style="color:#75715e"></span>tekst <span style="color:#f92672">=</span> leeg;               <span style="color:#75715e">// copy constructor gebruikt; tekst is nu ook leeg
</span><span style="color:#75715e"></span>tekst[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nul&#34;</span>;           <span style="color:#75715e">// segmentation fault: tekst heeft size 0
</span><span style="color:#75715e"></span>tekst <span style="color:#f92672">=</span> vector<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">1</span>);  <span style="color:#75715e">// lege lijst van strings, grootte 1
</span><span style="color:#75715e"></span>tekst[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nul&#34;</span>;           <span style="color:#f92672">//</span> ok</code></pre></div>
<p>p.98 of <a href="https://en.cppreference.com/w/cpp/container/vector">cppdocs</a> bevat basis manipulaties voor vectoren, zoals:</p>

<ul>
<li>elementen toevoegen met <code>push_back()</code></li>
<li>loopen over elementen met <code>for(auto i : v)</code></li>
<li>grootte controleren met <code>size()</code> en <code>empty()</code> zoals <code>std::string</code></li>
<li>correct gebruik van iterators <code>begin()</code> en <code>end()</code></li>
</ul>

<h2 id="a-name-oef-a-labo-oefeningen"><a name="oef"></a>Labo oefeningen</h2>

<ol>
<li><a href="../../c/labo-2/#oef">bibliothecaris labo 2 redux</a>: herimplementeer de bibliothecaris oefening in C++. Let op de verplichte aanwezigheid van:

<ul>
<li>een klasse <code>Bibliotheek</code> die een lijst van boeken (als simpele string) bevat</li>
<li>een klasse <code>Bibliothecaris</code> die de operaties op de bibliotheek uitvoert</li>
<li><code>cin &gt;&gt; var</code> om de boeken van de gebruiker in te lezen.</li>
<li>sorteerfuncties van STL</li>
</ul></li>
<li>GBA games worden vanwege het beperkt geheugen altijd in C in plaats van C++ ontwikkeld. Wij gaan daar geen rekening mee houden, en toch overschakelen. Herimplementeer <a href="../../teaching/cpp/labo-4-gba-2.c">deze Download, de opgave van labo 4</a>, in C++. Welke klasses heb je nodig? Denk aan de <code>paddle</code>, de <code>ball</code>, enzovoort. De C++ nodige cross-compiler is <code>arm-none-eabi-g++</code>.</li>
<li><em>Extra</em>: maak een <code>Dierentuin</code> klasse. Een dierentuin kan verschillende <em>dieren</em> (<code>Dier</code> klasse) ontvangen (<code>ontvang()</code> functie). Elk dier heeft een grootte en een naam: Neushoorn(40), Giraf(25), Poema(10). Elke dierentuin heeft x beschikbare ruimte. Wat doet het bestuur van je dierentuin als het te ontvangen dier te groot is? <br/>Bijvoorbeeld: dierentuin(20), leeuw(15) en panda(10). 15 + 10 &gt; 20.</li>
<li><em>Extra</em>: We starten met een taxi bedrijf dat chauffeurs in dienst neemt en wagens koopt om mee rond te rijden. Welke klassen denk je nodig te gaan hebben, en waarom? Teken eerst een model en trek pijlen die relaties voorstellen. Voorzie ook het concept &ldquo;klant&rdquo;, die kan vervoerd worden. Welke methodes ga je voorzien in je klassen?</li>
<li><em>Extra</em>: <a href="../../c/labo-1/#oef">Orc labo 1 redux</a>: herimplementeer het Orc model in een C++ klasse (opgave 2 en 3). Let op met memory leaks als orcs dood gaan! Hoe ziet de oude C functie <code>Orc vecht(Orc aanvaller, Orc verdediger)</code> er nu uit?</li>
</ol>

<p>Vergeet het volgende niet:</p>

<ul>
<li><a href="https://google.github.io/styleguide/cppguide.html">C++ Style Guide</a> te volgen en gebruik <em>camelCasing</em> voor C++ in plaats van snake casing voor C!</li>
<li>C++ online compileren kan op <a href="http://rextester.com/l/cpp_online_compiler_clang">rextester.com</a>.</li>
<li><a href="http://www.stroustrup.com/bs_faq2.html">C++ Style and Technique FAQ</a></li>
</ul>

<h2 id="denkvragen">Denkvragen</h2>

<ol>
<li>Kan je je een situatie inbeelden waarin het gebruik van raw pointers in een methode van een klasse toch aangewezen is?</li>
<li>Wat is het fundamenteel verschil tussen een struct in C en een class in C++?</li>
<li>Wat betekent de foutboodschap &ldquo;Segmentation fault&rdquo; precies?</li>
<li>Wanneer wordt een copy constructor aangeroepen? Leg aan de hand daarvan het verschil tussen initialisatie en toekenning uit.</li>
</ol>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../cpp/prep/" title="Voorbereiding Thuis"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../cpp/labo-6/" title="Labo 6: C&#43;&#43; Class Inheritance, operators en templates" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1602585869"></script>
    <script src="../../js/perfect-scrollbar.min.js?1602585869"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1602585869"></script>
    <script src="../../js/jquery.sticky.js?1602585869"></script>
    <script src="../../js/featherlight.min.js?1602585869"></script>
    <script src="../../js/highlight.pack.js?1602585869"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js?1602585869"></script>
    <script src="../../js/learn.js?1602585869"></script>
    <script src="../../js/hugo-learn.js?1602585869"></script>

    <link href="../../mermaid/mermaid.css?1602585869" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js?1602585869"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

