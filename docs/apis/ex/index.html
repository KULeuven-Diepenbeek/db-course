<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>3. Extra Oefeningen :: Databases</title>

    
    <link href="../../css/nucleus.css?1627640748" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1627640748" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1627640748" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1627640748" rel="stylesheet">
    <link href="../../css/auto-complete.css?1627640748" rel="stylesheet">
    <link href="../../css/theme.css?1627640748" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1627640748" rel="stylesheet">
    
    <link href="../../css/theme-kul.css?1627640748" rel="stylesheet">
    
    

    <script src="../../js/jquery-3.3.1.min.js?1627640748"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <script src=../../js/devselector.js></script>
<link href="../../css/devselector.css" rel="stylesheet">

  </head>
  <body class="" data-url="../../apis/ex/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
	<img src="../../img/style/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
	<img src="../../img/style/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1627640748"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1627640748"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/db-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1627640748"></script>

    
  </div>

    <div class="highlightable">
    <h3><a href="../../">Inhoudsopgave</a></h3>
    <ul class="topics">
        
          
          




 
  
    
    <li data-nav-id="/hoorcolleges/" title="Hoorcolleges" class="dd-item 
        
        
        
        ">
      <a href="../../hoorcolleges/">
          Hoorcolleges
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-1/" title="1. NoSQL Databases: Introductie" class="dd-item ">
        <a href="../../hoorcolleges/slides-1/">
        1. NoSQL Databases: Introductie
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-2/" title="2. NoSQL Databases: Advanced concepts" class="dd-item ">
        <a href="../../hoorcolleges/slides-2/">
        2. NoSQL Databases: Advanced concepts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-3/" title="3. NoSQL Graphs, Case Studies" class="dd-item ">
        <a href="../../hoorcolleges/slides-3/">
        3. NoSQL Graphs, Case Studies
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/hoorcolleges/slides-4/" title="4. Transactie Management" class="dd-item ">
        <a href="../../hoorcolleges/slides-4/">
        4. Transactie Management
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/nosql/" title="1. NoSQL" class="dd-item 
        
        
        
        ">
      <a href="../../nosql/">
          1. NoSQL
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/nosql/keyvaluestores/" title="1. Key/value stores" class="dd-item ">
        <a href="../../nosql/keyvaluestores/">
        1. Key/value stores
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/nosql/documentstores/" title="2. Document stores" class="dd-item ">
        <a href="../../nosql/documentstores/">
        2. Document stores
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/nosql/mapreduce/" title="3. Advanced map/red. queries" class="dd-item ">
        <a href="../../nosql/mapreduce/">
        3. Advanced map/red. queries
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/nosql/replication/" title="4. Replication" class="dd-item ">
        <a href="../../nosql/replication/">
        4. Replication
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/transacties/" title="2. Transacties" class="dd-item 
        
        
        
        ">
      <a href="../../transacties/">
          2. Transacties
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/transacties/failures-rollbacks/" title="1. Failures/Rollbacks" class="dd-item ">
        <a href="../../transacties/failures-rollbacks/">
        1. Failures/Rollbacks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/transacties/concurrency/" title="2. Concurrency" class="dd-item ">
        <a href="../../transacties/concurrency/">
        2. Concurrency
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/apis/" title="3. Database APIs" class="dd-item 
        parent
        
        
        ">
      <a href="../../apis/">
          3. Database APIs
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/apis/jdbc-jdbi/" title="1. JDBC en JDBI" class="dd-item ">
        <a href="../../apis/jdbc-jdbi/">
        1. JDBC en JDBI
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/apis/jpa/" title="2. JPA en Hibernate" class="dd-item ">
        <a href="../../apis/jpa/">
        2. JPA en Hibernate
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/apis/ex/" title="3. Extra Oefeningen" class="dd-item active">
        <a href="../../apis/ex/">
        3. Extra Oefeningen
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/examen/" title="4. Examen info" class="dd-item 
        
        
        
        ">
      <a href="../../examen/">
          4. Examen info
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.uhasselt.be/studiegids"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://toledo.kuleuven.be/portal/"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Index</a> > <a href='../../apis/'>3. Database APIs</a> > 3. Extra Oefeningen
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#sessy-library---revisited">SESsy Library - Revisited</a>
      <ul>
        <li><a href="#oefeningen">Oefeningen</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              3. Extra Oefeningen
            </h1>
          

        


<h2 id="sessy-library---revisited">SESsy Library - Revisited</h2>
<p><strong>Voorbereiding</strong>: Maak uzelf opnieuw vertrouwd met <a href="https://kuleuven-diepenbeek.github.io/ses-course/extra/sessy/">de SESsy Library applicatie</a>, de geïntegreerde oefening uit het tweedejaarsvak Software Engineering Skills.</p>
<p><img src="https://kuleuven-diepenbeek.github.io/ses-course/img/teaching/ses/sessy.png" alt=""></p>
<p>Het is interessant om de libraries die de app gebruikt eens in detail te inspecteren. Dat kan met <code>gradlew dependencies</code>. In context van het vak <em>Databasess</em> zien we dat de webapp gebouwd is met de volgende relevante tools en libraries:</p>
<ol>
<li>Als database endpoint wordt <code>com.h2database.h2</code> gebruikt.</li>
<li>De Dropwizard <code>jdbi3</code> dependency verwijst op zijn beurt naar een variant van <code>jdbc</code></li>
<li>De <code>sqlobject</code> plugin van Jdbi3 wordt gebruikt.</li>
</ol>
<p>Zoals een snippet van de dependency tree aangeeft:</p>
<pre><code>...
+--- io.dropwizard:dropwizard-jdbi3:2.0.0-rc12
|    +--- io.dropwizard:dropwizard-db:2.0.0-rc12
|    |    +--- io.dropwizard:dropwizard-core:2.0.0-rc12 (*)
|    |    \--- org.apache.tomcat:tomcat-jdbc:9.0.27
|    |         \--- org.apache.tomcat:tomcat-juli:9.0.27
...
</code></pre><h3 id="oefeningen">Oefeningen</h3>
<ol>
<li>Inspecteer de <a href="http://h2database.com/html/main.html">H2 Database Engine</a> documentatie. Wat is het verschil tussen H2 en MySQL? En wat zijn de <em>gelijkenissen</em> tussen H2 en SQLite dat elders in deze cursus wordt gebruikt?</li>
<li>Zoek in de SEssy code waar de Jdbi3 sqlobject annotaties worden gebruikt. Dit is dus de Jdbi <em>Declarative API</em> (zie <a href="https://jdbi.org">docs</a>). Wat zou je moeten doen om dit te refactoren naar de <em>Fluent API</em>? Voer de veranderingen door voor de methode <code>findBooksByTitle()</code>.</li>
<li>Worden ergens <em>transacties</em> gebruikt? Wordt er ergens in de code bewaakt tegen concurrency? Indien niet, bouw dit in voor het uitlenen van boeken in de methode <code>borrow()</code>. Moet transactie beheer op niveau van <em>Resource</em> klasses staan, of behoort het volgens jou toe aan de <em>Repository</em> klasses? Welke code heb je specifiek nodig om in Jdbi3 transacties te hanteren?</li>
<li>Stel dat ik in een nieuwe repository klasse een low-level SQL statement zelf wil schrijven en uitvoeren, rechtstreeks naar de database, in plaats van via Jdbi3. Hoe kan ik dat doen? Probeer dit zelf in de code door iets met de <code>books</code> tabel te doen (bijvoorbeeld een <code>COUNT</code>).</li>
<li>Is er een manier om de queries die Jdbi3 uitvoert in H2 ook af te drukken, zoals Hibernate&rsquo;s <code>show_sql</code> config flag?</li>
<li>We zijn niet meer tevreden over de performantie en het gebruiksgemak van H2. We wensen in de plaats daarvan JPA + Hibernate te gebruiken. Voer de nodige veranderingen door. <strong>Test de applicatie</strong> ook uitvoerig door de webserver op te starten! De integratie testen die falen mag je negeren, dat valt buiten deze cursus om die ook te converteren. Denk eerst goed na over welke wijzigingen allemaal moeten gebeuren:
<ul>
<li>Welke config file wordt nu gebruikt om de database file/connectionstring op te geven? Hoe kan je dat vervangen door <code>persistence.xml</code>?</li>
<li>Kan je interfaces, strategies, of facades gebruiken om <em>eerst</em> de H2 implementatie te verbergen, en dan te refactoren, of is dat niet meer nodig?</li>
<li>Is er een manier <a href="https://www.dropwizard.io/en/latest/manual/hibernate.html?highlight=hibernate">in Dropwizard</a> om eenvoudiger Hibernate session factories aan te maken? (ja dus!)</li>
<li>&hellip;</li>
</ul>
</li>
</ol>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../apis/jpa/" title="2. JPA en Hibernate"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../examen/" title="4. Examen info" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1627640748"></script>
    <script src="../../js/perfect-scrollbar.min.js?1627640748"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1627640748"></script>
    <script src="../../js/jquery.sticky.js?1627640748"></script>
    <script src="../../js/featherlight.min.js?1627640748"></script>
    <script src="../../js/modernizr.custom-3.6.0.js?1627640748"></script>
    <script src="../../js/learn.js?1627640748"></script>
    <script src="../../js/hugo-learn.js?1627640748"></script>
    
        
            <script src="../../mermaid/mermaid.js?1627640748"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

