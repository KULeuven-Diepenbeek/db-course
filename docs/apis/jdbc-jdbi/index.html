<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.122.0">
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>2. JDBC en JDBI :: Databases</title>

    
    <link href="../../css/nucleus.css?1713247283" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1713247283" rel="stylesheet">
    <link href="../../css/hybrid.css?1713247283" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1713247283" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1713247283" rel="stylesheet">
    <link href="../../css/auto-complete.css?1713247283" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1713247283" rel="stylesheet">
    <link href="../../css/theme.css?1713247283" rel="stylesheet">
    <link href="../../css/devselector.css?1713247283" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1713247283" rel="stylesheet">
    <link href="../../css/theme-kul.css?1713247283" rel="stylesheet">
    

    <script src="../../js/jquery-3.3.1.min.js?1713247283"></script>
    <script src="../../js/devselector.js?1713247283"></script>
    <script id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="../../apis/jdbc-jdbi/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
  <img src="../../images/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
  <img src="../../images/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1713247283"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1713247283"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/db-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1713247283"></script>

    
  </div>

    <div class="highlightable">

      <h3><a href="../../">Course Contents</a></h3>
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/sql/" title="1. RDBMS" class="dd-item
        
        
        
        ">
      <a href="../../sql/">
          1. RDBMS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/sql/rdbms-basics/" title="1. Database Basics" class="dd-item ">
        <a href="../../sql/rdbms-basics/">
        1. Database Basics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sql/rdbms-components/" title="2. Database Componenten" class="dd-item ">
        <a href="../../sql/rdbms-components/">
        2. Database Componenten
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/sql-ddl-dml/" title="2. SQL DDL &amp; DML" class="dd-item
        
        
        
        ">
      <a href="../../sql-ddl-dml/">
          2. SQL DDL &amp; DML
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/sql-ddl-dml/ddl/" title="1. DDL" class="dd-item ">
        <a href="../../sql-ddl-dml/ddl/">
        1. DDL
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/sql-ddl-dml/dml/" title="2. DML" class="dd-item ">
        <a href="../../sql-ddl-dml/dml/">
        2. DML
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/transacties/" title="3. RDBMS Transacties" class="dd-item
        
        
        
        ">
      <a href="../../transacties/">
          3. RDBMS Transacties
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/transacties/basics/" title="1. Transaction Mgmt. Basics" class="dd-item ">
        <a href="../../transacties/basics/">
        1. Transaction Mgmt. Basics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/transacties/concurrency-control/" title="2. Concurrency Control" class="dd-item ">
        <a href="../../transacties/concurrency-control/">
        2. Concurrency Control
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/transacties/failures-rollbacks/" title="3. Failures-Rollbacks" class="dd-item ">
        <a href="../../transacties/failures-rollbacks/">
        3. Failures-Rollbacks
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/apis/" title="4. Database APIs" class="dd-item
        parent
        
        
        ">
      <a href="../../apis/">
          4. Database APIs
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/apis/basics/" title="1. API Basics" class="dd-item ">
        <a href="../../apis/basics/">
        1. API Basics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/apis/jdbc-jdbi/" title="2. JDBC en JDBI" class="dd-item active">
        <a href="../../apis/jdbc-jdbi/">
        2. JDBC en JDBI
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/extra/" title="X. Extras" class="dd-item
        
        
        
        ">
      <a href="../../extra/">
          X. Extras
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://studiegidswww.uhasselt.be/opleidingsonderdeel.aspx?a=2023&amp;i=4290"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li>
                  <a class="padding" href="https://toledo.kuleuven.be/portal/"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/kuleuven-diepenbeek/db-course/"><i class='fab fa-github'></i> Course Git Repository</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Index</a> > <a href='../../apis/'>4. Database APIs</a> > 2. JDBC en JDBI
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#11-java-database-connectivity-jdbc">1.1 Java Database Connectivity (JDBC)</a>
      <ul>
        <li><a href="#111-hoe-verbind-ik-java-met-de-db">1.1.1 Hoe verbind ik Java met de DB?</a></li>
        <li><a href="#112-queriesobjecten-in-jdbc">1.1.2 Queries/Objecten in JDBC</a></li>
        <li><a href="#113-oefeningen">1.1.3 Oefeningen</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              2. JDBC en JDBI
            </h1>
          

        


<h2 id="11-java-database-connectivity-jdbc">1.1 Java Database Connectivity (JDBC)</h2>
<h3 id="111-hoe-verbind-ik-java-met-de-db">1.1.1 Hoe verbind ik Java met de DB?</h3>
<p><a href="https://www.tutorialspoint.com/jdbc/index.htm">JDBC</a> is een interface in de JDK die ons in staat stelt om een connectie te openen naar een database. <strong>JDBC is een API</strong>: een abstracitelaag of een <em>protocol</em>. Dit betekent dat we met JDBC kunnen verbinden naar eender welke server van eender welke flavor: een Oracle SQL, MSSQL, of SQLite database. De database <em>vendor</em> wordt verborgen achter de JDBC laag. Voor deze oefeningen beperken we ons tot SQLite.</p>

<div class="notices info" ><p>Update van de cursustekst en oefeningen zijn onderweg, tegen de volgende les van 29/03 zullen we alles overschakelen naar MYSQL dat jullie eerder al gebruikten met XAMP en phpmyadmin. Enige verschillen met MYSQL zijn:</p>
<table>
<thead>
<tr>
<th>MYSQL</th>
<th>SQLITE</th>
</tr>
</thead>
<tbody>
<tr>
<td>AUTO_INCREMENT</td>
<td>AUTOINCREMENT</td>
</tr>
<tr>
<td>BOOLEAN</td>
<td>BOOL</td>
</tr>
</tbody>
</table>
</div>

<p>Voor elke database moet er dus een vendor-specifieke driver als dependency worden toegevoegd. In het geval van SQLite is dit de <a href="https://github.com/xerial/sqlite-jdbc">sqlite-jdbc</a> driver, de <code>sqlite-jdbc</code> package. JDBC zelf leeft in <code>java.sql</code> en is een integraal onderdeel van de JDK: dit moeten we dus niet apart oplijsten als dependency of downloaden.</p>

<div class="mermaid" align="left" >
	
graph LR;
    Java[Java]
    JDBC[JDBC]
    SQLITE[SQLite-JDBC]
    DB[(SQLite Database)]
    subgraph Java space
    subgraph JDK
    Java -.-> JDBC
    end
    JDBC --> SQLITE
    end
    subgraph DB space
    SQLITE --> DB
    end

</div>
<p>De <code>sqlite-jdbc</code> package zorgt voor de brug tussen onze Java applicatie en de database, maar we spreken die aan via JDBC.</p>
<p>Enkele belangrijke statements:</p>
<ol>
<li>Een connectie naar een database vastleggen: <code>var connection = DriverManager.getConnection(&quot;jdbc:sqlite:mydb.db&quot;);</code></li>
<li>Een <code>SELECT</code> query uitvoeren: <code>var s = connection.createStatement(); var result = s.executeQuery(&quot;...&quot;); var cell = result.getString(&quot;column&quot;);</code></li>
<li>Een <code>INSERT</code>/<code>UPDATE</code>/&hellip; query uitvoeren (die de structuur of inhoud van de database <strong>wijzigt</strong>): <code>var s = connection.createStatement(); s.executeUpdate(&quot;...&quot;);</code></li>
</ol>
<p>Het volgende voorbeeld opent een verbinding naar een DB, maakt een tabel aan, voegt een record toe, en telt het aantal records:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a8c8">private</span> <span style="color:#111">Connection</span> <span style="color:#111">connection</span><span style="color:#111">;</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">createDb</span><span style="color:#111">()</span> <span style="color:#00a8c8">throws</span> <span style="color:#111">SQLException</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">connection</span> <span style="color:#f92672">=</span> <span style="color:#111">DriverManager</span><span style="color:#111">.</span><span style="color:#75af00">getConnection</span><span style="color:#111">(</span><span style="color:#d88200">&#34;jdbc:sqlite:mydb.db&#34;</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">var</span> <span style="color:#111">s</span> <span style="color:#f92672">=</span> <span style="color:#111">connection</span><span style="color:#111">.</span><span style="color:#75af00">createStatement</span><span style="color:#111">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">s</span><span style="color:#111">.</span><span style="color:#75af00">executeUpdate</span><span style="color:#111">(</span><span style="color:#d88200">&#34;CREATE TABLE mijntabel(nr INT); INSERT INTO mijntabel(nr) VALUES(1);&#34;</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">s</span><span style="color:#111">.</span><span style="color:#75af00">close</span><span style="color:#111">();</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">verifyDbContents</span><span style="color:#111">()</span> <span style="color:#00a8c8">throws</span> <span style="color:#111">SQLException</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">var</span> <span style="color:#111">s</span> <span style="color:#f92672">=</span> <span style="color:#111">connection</span><span style="color:#111">.</span><span style="color:#75af00">createStatement</span><span style="color:#111">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">var</span> <span style="color:#111">result</span> <span style="color:#f92672">=</span> <span style="color:#111">s</span><span style="color:#111">.</span><span style="color:#75af00">executeQuery</span><span style="color:#111">(</span><span style="color:#d88200">&#34;SELECT COUNT(*) FROM mijntabel;&#34;</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">var</span> <span style="color:#111">count</span> <span style="color:#f92672">=</span> <span style="color:#111">result</span><span style="color:#111">.</span><span style="color:#75af00">getInt</span><span style="color:#111">(</span><span style="color:#111">0</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">s</span><span style="color:#111">.</span><span style="color:#75af00">close</span><span style="color:#111">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">assert</span> <span style="color:#111">count</span> <span style="color:#f92672">==</span> <span style="color:#111">1</span><span style="color:#111">;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<p><strong>Gradle</strong> dependency: laatste versie van <a href="https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc">sqlite-jdbc in mvnrepository.com</a>.</p>
<p>Merk op dat <code>SQLException</code> een <strong>checked exception</strong> is die je constant moet meespelen in de method signature of expliciet moet opvangen. Het probleem van een <code>try { } catch { } finally { }</code> block is dat in de finally je ook geen <code>close()</code> kan uitvoeren zonder opnieuw een <code>try</code> block te openen&hellip; Inception!</p>
<p>Het <code>connection.close()</code> statement moet er voor zorgen dat voor elke request de connection netjes wordt afgesloten. Een database heeft meestal een <strong>connection pool</strong> van x aantel beschikbare connections, bijvoorbeeld 5. Als een connection per request niet wordt gesloten, heeft de voglende bezoeker van onze website geen enkele kans om zijn zoekquery te lanceren, omdat de database dan zegt dat alle connecties zijn opgebruikt!</p>
<p>Merk op dat de String <code>jdbc:sqlite:mydb.db</code> een <strong>lokale SQLite database file</strong> aanmaakt op het huidig relatief pad, zodat je met SQLite Explorer data kan inspecteren. Deze file wordt herbruikt: indien je een tabel aanmaakt de eerste keer, gaat dit de tweede keer crashen met <em>table already exists</em>. Houd hier dus rekening mee (e.v.t. met <code>IF NOT EXISTS</code>). Je kan ook een <strong>in-memory database</strong> aanmaken, die volledig in RAM leeft en bij elke opstart opnieuw wordt aangemaakt, met de String <code>jdbc:sqlite:memory</code>.</p>
<p>Werk je met een andere database maar heb je geen idee hoe die speciale connection string te vormen? Geen probleem, daarvoor dient <a href="https://www.connectionstrings.com/">https://www.connectionstrings.com/</a>. Bijvoorbeeld, een connectie naar de Microsoft Azure cloud kan met de volgende syntax:</p>
<pre tabindex="0"><code>Server=tcp:myserver.database.windows.net,1433;Database=myDataBase;User ID=mylogin@myserver;Password=myPassword;Trusted_Connection=False;Encrypt=True;
</code></pre><p>Het is de connection string die bepaalt welke dependency binding gebruikt wordt! Dit noemen we <em>late binding</em>: er is <strong>geen expliciete referentie</strong> naar iets van SQLite in de Java code; we werken <em>enkel</em> met JDBC zelf. Als je de vendor driver vergeet toe te voegen als Gradle dependency gebeurt er dit:</p>
<pre tabindex="0"><code>Exception in thread &#34;main&#34; java.sql.SQLException: No suitable driver found for jdbc:sqlite:mydb.db
    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:702)
    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:251)
    at Demo.main(Demo.java:8)
</code></pre>
<div class="notices note" ><p>In-memory databases (ConStr. <code>jdbc:sqlite:memory</code>), die met een lege database vertrekken, en constant <code>CREATE TABLE()</code> statements issuen, vervuilen je broncode. Als je veel SQL moet uitvoeren is het beter om dit in een <code>.sql</code> bestand te bewaren in <code>src/main/resources</code> en eenmalig in te lezen als SQL met <code>new String(Files.readAllBytes(Paths.g));</code>, om te kunnen uitvoeren via <code>statement.executeUpdate()</code>. Zie het <a href="https://github.com/KULeuven-Diepenbeek/db-course/tree/main/examples/java/jdbc-repo-start">jdbc-repo-start</a> project op GitHub als voorbeeld.</p>
</div>

<h3 id="112-queriesobjecten-in-jdbc">1.1.2 Queries/Objecten in JDBC</h3>
<p>Stel dat we dezelfde studenten willen inladen in een <code>Student</code> klasse instantie: van de <code>TABLE STUDENT</code> naar de <code>class Student</code>. In geval van JDBC is dat veel handwerk:</p>
<ol>
<li>Maak een verbinding met de database.</li>
<li>Voer de <code>SELECT</code> statements uit.</li>
<li>Loop door de <code>ResultSet</code> en maak een nieuwe <code>Student</code> instantie aan. Vang alle mogelijke fouten zelf op: wat met lege kolommen, <code>null</code>? Wat met <code>INTEGER</code> kolommen die je wilt mappen op een <code>String</code> property?</li>
</ol>
<p>Om van de huidige resultatenrij naar de volgende te springen in <code>ResultSet</code> gebruikt men de methode <code>next()</code> in een typisch <code>while()</code> formaat:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a8c8">var</span> <span style="color:#111">result</span> <span style="color:#f92672">=</span> <span style="color:#111">statement</span><span style="color:#111">.</span><span style="color:#75af00">executeQuery</span><span style="color:#111">(</span><span style="color:#d88200">&#34;SELECT * FROM iets&#34;</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">while</span><span style="color:#111">(</span><span style="color:#111">result</span><span style="color:#111">.</span><span style="color:#75af00">next</span><span style="color:#111">())</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">var</span> <span style="color:#111">eenString</span> <span style="color:#f92672">=</span> <span style="color:#111">result</span><span style="color:#111">.</span><span style="color:#75af00">getString</span><span style="color:#111">(</span><span style="color:#d88200">&#34;kolomnaam&#34;</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// doe iets!</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<p>Zie ook <a href="https://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html">ResultSet Oracle Javadoc</a>.</p>
<p>Aangezien we reeds hebben kennis gemaakt met de (beperkte) API, schakelen we onmiddellijk over naar de oefeningen:</p>
<h3 id="113-oefeningen">1.1.3 Oefeningen</h3>
<p>Gebruik voor de oefeningen de <code>student</code> tabel statements uit <a href="../../transacties/failures-rollbacks/">RDBMS Transacties - Failures &amp; Rollbacks</a>.</p>
<ol>
<li>Maak (én test!) een klasse <code>StudentRepository</code> die de volgende methode implementeert. Zoals je ziet is het de bedoeling dat de JDBC <code>Connection</code> instance elders wordt aangemaakt, bijvoorbeeld in een <strong>aparte</strong> <code>ConnectionManager</code> klasse.</li>
</ol>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">StudentRepository</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#00a8c8">public</span> <span style="color:#75af00">StudentRepository</span><span style="color:#111">(</span><span style="color:#111">Connection</span> <span style="color:#111">connection</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#00a8c8">public</span> <span style="color:#111">List</span><span style="color:#f92672">&lt;</span><span style="color:#111">Student</span><span style="color:#f92672">&gt;</span> <span style="color:#75af00">getStudentsByName</span><span style="color:#111">(</span><span style="color:#111">String</span> <span style="color:#111">name</span><span style="color:#111">);</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<ol start="2">
<li>Hoe zou je bovenstaande <code>StudentRepository</code> unit (integratie) testen, zonder de &ldquo;productie database&rdquo; op te vullen met testdata? (Hint: kijk naar het constructor argument). Hoe kan je <code>getStudentsByName()</code> testen zonder de volgende oefening afgewerkt te hebben, die nieuwe studenten bewaren pas mogelijk maakt?</li>
<li>Breid dit uit met <code>saveNewStudent(Student)</code>.</li>
<li>Breid dit uit met <code>updateStudent(Student)</code>. Wat moet je doen als deze student nog niet in de database zit? Welke gegevens update je wel en welke niet?</li>
<li>Merk op dat elke keer als je je project opstart je geen <code>CREATE TABLE student</code> kan uitvoeren als je een file-based SQLite bestand hanteert: eens de tabel is aangemaakt geeft een nieuwe create foutmeldingen. <code>DROP TABLE IF EXISTS student;</code> lost dit op, maar daardoor ben je ook altijd je data kwijt. Hoe los je dit probleem op?</li>
<li>Stel dat een <code>Student</code> is ingeschreven in een <code>Cursus</code> met properties <code>naam</code> (vb. &ldquo;databases&rdquo;) en <code>ects</code> (vb. 4).
<ul>
<li>Maak een <code>CursusRepository</code> om nieuwe cursussen te bewaren.</li>
<li>Hoe link je de <code>Student</code> klasse met de <code>Cursus</code> klasse? wat verandert er in de query van <code>getStudentsByName()</code>?</li>
</ul>
</li>
</ol>
<p><strong>Tips</strong>:</p>
<ul>
<li><code>executeUpdate()</code> van een <code>Statement</code> is erg omslachtig als je een string moet stamenstellen die een <code>INSERT</code> query voorstelt (haakjes, enkele quotes, &hellip;). Wat meer is, als de input van een UI komt, kan dit gehacked worden, door zelf de quote te sluiten in de string. Dit noemt men <strong>SQL Injection</strong>, en om dat te vermijden gebruik je in JDBC de <code>prepareStatement()</code> methode. Zie <a href="https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html">JDBC Basics: Prepared Statements</a>. De String die je meegeeft bevat in de plaats van parameters een vraagteken: <code>INSERT INTO STUDENT(bla, bla) VALUES(?, ?)</code>. Die parameters vul je daarna aan met <code>preparedStatement.setString()</code> of <code>setInt()</code>. Op die manier is de code zowel <em>netjes</em> als <em>injectie-vrij</em>!</li>
<li>Als je data wenst op te halen dat is verspreid over verschillende tabellen, is de kans groot dat een <code>JOIN</code> SQL statement nodig is. Probeer eerst de query te schrijven in de <em>SQLite DB Browser</em> tool. De Java objecten opvullen is de laatste taak.</li>
</ul>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../apis/basics/" title="1. API Basics"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../extra/" title="X. Extras" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1713247283"></script>
    <script src="../../js/perfect-scrollbar.min.js?1713247283"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1713247283"></script>
    <script src="../../js/jquery.sticky.js?1713247283"></script>
    <script src="../../js/featherlight.min.js?1713247283"></script>
    <script src="../../js/modernizr.custom-3.6.0.js?1713247283"></script>
    <script src="../../js/learn.js?1713247283"></script>
    <script src="../../js/hugo-learn.js?1713247283"></script>
    <script src="../../js/mermaid.min.js?1713247283"></script>
    <script>
    window.MathJax = {
      chtml: {
        scale: 2,                      
        minScale: .5,                  
        matchFontHeight: true,         
        mtextInheritFont: false,       
        merrorInheritFont: true,       
        mathmlSpacing: false,          
        skipAttributes: {},            
        exFactor: .5,                  
        displayAlign: 'center',        
        displayIndent: '0'             
      }
    };
    </script>
    
    

  </body>
</html>

